package com.test.json;


import com.alibaba.fastjson.JSONArray;
import com.alibaba.fastjson.JSONObject;

public class AnalysisJson {
    public static void main(String[] args) {
        //TD_BI_ANALYSIS_MODEL
        String jsonStr = "{\"categoryid\":\"\",\"connectInfo\":[{\"from\":{\"tableName\":\"dept_income_detail\",\"elementId\":\"dept_income_detail\",\"anchor\":\"RightMiddle\"},\"to\":{\"tableName\":\"UP_ORG_UNIT\",\"elementId\":\"UP_ORG_UNIT\",\"anchor\":\"LeftMiddle\"},\"joinInfo\":{\"joinType\":\"INNERJOIN\",\"relations\":[{\"from\":\"dept_income_detail.courtyard_area_code\",\"operater\":\"=\",\"to\":\"UP_ORG_UNIT.NAME\"}]},\"id\":\"con_06937846633855682\"},{\"from\":{\"tableName\":\"income_detail\",\"elementId\":\"income_detail\",\"anchor\":\"RightMiddle\"},\"to\":{\"tableName\":\"UP_ORG_UNIT\",\"elementId\":\"UP_ORG_UNIT\",\"anchor\":\"LeftMiddle\"},\"joinInfo\":{\"joinType\":\"INNERJOIN\",\"relations\":[{\"from\":\"income_detail.COMP_CODE\",\"operater\":\"=\",\"to\":\"UP_ORG_UNIT.CODE\"}]},\"id\":\"con_25448422269539606\"},{\"from\":{\"tableName\":\"income_detail\",\"elementId\":\"income_detail\",\"anchor\":\"RightMiddle\"},\"to\":{\"tableName\":\"DATE_RELA\",\"elementId\":\"DATE_RELA\",\"anchor\":\"LeftMiddle\"},\"joinInfo\":{\"joinType\":\"INNERJOIN\",\"relations\":[{\"from\":\"income_detail.ACCT_YEAR\",\"operater\":\"=\",\"to\":\"DATE_RELA.acct_year\"},{\"from\":\"income_detail.ACCT_MONTH\",\"operater\":\"=\",\"to\":\"DATE_RELA.acct_month\"}]},\"id\":\"con_8979133019359173\"},{\"from\":{\"tableName\":\"income_detail\",\"elementId\":\"income_detail\",\"anchor\":\"RightMiddle\"},\"to\":{\"tableName\":\"sys_dept\",\"elementId\":\"sys_dept\",\"anchor\":\"LeftMiddle\"},\"joinInfo\":{\"joinType\":\"INNERJOIN\",\"relations\":[{\"from\":\"income_detail.ORDERED_BY\",\"operater\":\"=\",\"to\":\"sys_dept.dept_id\"}]},\"id\":\"con_47525678450343145\"}],\"description\":\"\",\"name\":\"order_income_detail\",\"tableList\":[{\"displayName\":\"院区字典\",\"fieldsInfo\":[{\"aliasName\":null,\"comments\":\"ID\",\"dataType\":\"string\",\"fieldName\":\"ID\",\"fieldType\":\"dimension\",\"isChecked\":false,\"tableName\":\"UP_ORG_UNIT\"},{\"aliasName\":null,\"comments\":\"名称\",\"dataType\":\"string\",\"fieldName\":\"NAME\",\"fieldType\":\"dimension\",\"isChecked\":true,\"tableName\":\"UP_ORG_UNIT\"},{\"aliasName\":null,\"comments\":\"编码\",\"dataType\":\"string\",\"fieldName\":\"CODE\",\"fieldType\":\"dimension\",\"isChecked\":true,\"tableName\":\"UP_ORG_UNIT\"},{\"aliasName\":null,\"comments\":\"生效时间\",\"dataType\":\"date\",\"fieldName\":\"TIME_BEGIN\",\"fieldType\":\"dimension\",\"isChecked\":false,\"tableName\":\"UP_ORG_UNIT\"},{\"aliasName\":null,\"comments\":\"失效时间\",\"dataType\":\"date\",\"fieldName\":\"TIME_END\",\"fieldType\":\"dimension\",\"isChecked\":false,\"tableName\":\"UP_ORG_UNIT\"},{\"aliasName\":null,\"comments\":\"是否启用\",\"dataType\":\"string\",\"fieldName\":\"IS_ENABLED\",\"fieldType\":\"dimension\",\"isChecked\":false,\"tableName\":\"UP_ORG_UNIT\"},{\"aliasName\":null,\"comments\":\"单位级次\",\"dataType\":\"int\",\"fieldName\":\"comp_level\",\"fieldType\":\"measure\",\"isChecked\":false,\"tableName\":\"UP_ORG_UNIT\"},{\"aliasName\":\"super_code\",\"comments\":\"上级编码\",\"dataType\":\"string\",\"fieldName\":\"super_code\",\"fieldType\":\"dimension\",\"isChecked\":false,\"tableName\":\"UP_ORG_UNIT\"},{\"aliasName\":\"is_last\",\"comments\":\"是否末级\",\"dataType\":\"string\",\"fieldName\":\"is_last\",\"fieldType\":\"dimension\",\"isChecked\":false,\"tableName\":\"UP_ORG_UNIT\"},{\"aliasName\":null,\"comments\":\"单位类别\",\"dataType\":\"string\",\"fieldName\":\"comp_level_code\",\"fieldType\":\"dimension\",\"isChecked\":false,\"tableName\":\"UP_ORG_UNIT\"},{\"aliasName\":\"u_id\",\"comments\":\"u_id\",\"dataType\":\"string\",\"fieldName\":\"u_id\",\"fieldType\":\"dimension\",\"isChecked\":false,\"tableName\":\"UP_ORG_UNIT\"},{\"aliasName\":null,\"comments\":\"cid\",\"dataType\":\"string\",\"fieldName\":\"cid\",\"fieldType\":\"dimension\",\"isChecked\":false,\"tableName\":\"UP_ORG_UNIT\"}],\"isHideFieldList\":false,\"location\":{\"left\":\"658px\",\"top\":\"172px\"},\"tableName\":\"UP_ORG_UNIT\",\"isMainTable\":false},{\"displayName\":\"科室字典\",\"fieldsInfo\":[{\"aliasName\":null,\"comments\":\"部门序号\",\"dataType\":\"int\",\"fieldName\":\"dept_id\",\"fieldType\":\"measure\",\"isChecked\":false,\"tableName\":\"sys_dept\"},{\"aliasName\":\"comp_code1\",\"comments\":\"单位编码\",\"dataType\":\"string\",\"fieldName\":\"comp_code\",\"fieldType\":\"dimension\",\"isChecked\":false,\"tableName\":\"sys_dept\"},{\"comments\":\"部门编码\",\"dataType\":\"string\",\"fieldName\":\"dept_code\",\"fieldType\":\"dimension\",\"isChecked\":false,\"tableName\":\"sys_dept\"},{\"aliasName\":null,\"comments\":\"部门名称\",\"dataType\":\"string\",\"fieldName\":\"dept_name\",\"fieldType\":\"dimension\",\"isChecked\":true,\"tableName\":\"sys_dept\"},{\"aliasName\":null,\"comments\":\"部门全称\",\"dataType\":\"string\",\"fieldName\":\"dept_name_all\",\"fieldType\":\"dimension\",\"isChecked\":false,\"tableName\":\"sys_dept\"},{\"aliasName\":\"super_code1\",\"comments\":\"上级编码\",\"dataType\":\"string\",\"fieldName\":\"super_code\",\"fieldType\":\"dimension\",\"isChecked\":false,\"tableName\":\"sys_dept\"},{\"aliasName\":null,\"comments\":\"部门类型编号\",\"dataType\":\"int\",\"fieldName\":\"kind_id\",\"fieldType\":\"measure\",\"isChecked\":false,\"tableName\":\"sys_dept\"},{\"aliasName\":null,\"comments\":\"部门类别编码\",\"dataType\":\"string\",\"fieldName\":\"type_code\",\"fieldType\":\"dimension\",\"isChecked\":true,\"tableName\":\"sys_dept\"},{\"aliasName\":null,\"comments\":\"部门性质编码\",\"dataType\":\"string\",\"fieldName\":\"attr_code\",\"fieldType\":\"dimension\",\"isChecked\":true,\"tableName\":\"sys_dept\"},{\"aliasName\":null,\"comments\":\"部门级别\",\"dataType\":\"string\",\"fieldName\":\"dept_level\",\"fieldType\":\"dimension\",\"isChecked\":true,\"tableName\":\"sys_dept\"},{\"aliasName\":null,\"comments\":\"spell\",\"dataType\":\"string\",\"fieldName\":\"spell\",\"fieldType\":\"dimension\",\"isChecked\":false,\"tableName\":\"sys_dept\"},{\"aliasName\":null,\"comments\":\"职能科室标记\",\"dataType\":\"string\",\"fieldName\":\"is_func\",\"fieldType\":\"dimension\",\"isChecked\":false,\"tableName\":\"sys_dept\"},{\"aliasName\":\"is_last1\",\"comments\":\"末级标记\",\"dataType\":\"string\",\"fieldName\":\"is_last\",\"fieldType\":\"dimension\",\"isChecked\":false,\"tableName\":\"sys_dept\"},{\"aliasName\":null,\"comments\":\"是否采购\",\"dataType\":\"string\",\"fieldName\":\"is_stock\",\"fieldType\":\"dimension\",\"isChecked\":false,\"tableName\":\"sys_dept\"},{\"aliasName\":null,\"comments\":\"是否服务\",\"dataType\":\"string\",\"fieldName\":\"is_service\",\"fieldType\":\"dimension\",\"isChecked\":false,\"tableName\":\"sys_dept\"},{\"aliasName\":null,\"comments\":\"收支类型编码\",\"dataType\":\"string\",\"fieldName\":\"inout_type_code\",\"fieldType\":\"dimension\",\"isChecked\":false,\"tableName\":\"sys_dept\"},{\"aliasName\":null,\"comments\":\"停用标记\",\"dataType\":\"string\",\"fieldName\":\"is_stop\",\"fieldType\":\"dimension\",\"isChecked\":false,\"tableName\":\"sys_dept\"},{\"aliasName\":null,\"comments\":\"停用日期\",\"dataType\":\"date\",\"fieldName\":\"stop_date\",\"fieldType\":\"dimension\",\"isChecked\":false,\"tableName\":\"sys_dept\"},{\"aliasName\":null,\"comments\":\"是否分摊\",\"dataType\":\"string\",\"fieldName\":\"is_app\",\"fieldType\":\"dimension\",\"isChecked\":false,\"tableName\":\"sys_dept\"},{\"aliasName\":null,\"comments\":\"分摊级别\",\"dataType\":\"int\",\"fieldName\":\"app_level\",\"fieldType\":\"measure\",\"isChecked\":false,\"tableName\":\"sys_dept\"},{\"aliasName\":\"u_id1\",\"comments\":\"u_id\",\"dataType\":\"int\",\"fieldName\":\"u_id\",\"fieldType\":\"measure\",\"isChecked\":false,\"tableName\":\"sys_dept\"},{\"aliasName\":null,\"comments\":\"是否预算科室\",\"dataType\":\"string\",\"fieldName\":\"is_budget\",\"fieldType\":\"dimension\",\"isChecked\":false,\"tableName\":\"sys_dept\"},{\"aliasName\":null,\"comments\":\"部门路径\",\"dataType\":\"string\",\"fieldName\":\"dept_path\",\"fieldType\":\"dimension\",\"isChecked\":false,\"tableName\":\"sys_dept\"}],\"isHideFieldList\":false,\"location\":{\"left\":\"652px\",\"top\":\"417px\",\"height\":400,\"width\":298},\"tableName\":\"sys_dept\",\"isMainTable\":false},{\"displayName\":\"income_detail\",\"fieldsInfo\":[{\"aliasName\":\"COMP_CODE2\",\"comments\":\"COMP_CODE\",\"dataType\":\"string\",\"fieldName\":\"COMP_CODE\",\"fieldType\":\"dimension\",\"isChecked\":false,\"tableName\":\"income_detail\"},{\"aliasName\":\"ACCT_YEAR2\",\"comments\":\"ACCT_YEAR\",\"dataType\":\"string\",\"fieldName\":\"ACCT_YEAR\",\"fieldType\":\"dimension\",\"isChecked\":false,\"tableName\":\"income_detail\"},{\"aliasName\":\"ACCT_MONTH2\",\"comments\":\"ACCT_MONTH\",\"dataType\":\"string\",\"fieldName\":\"ACCT_MONTH\",\"fieldType\":\"dimension\",\"isChecked\":false,\"tableName\":\"income_detail\"},{\"aliasName\":null,\"comments\":\"ORDERED_BY\",\"dataType\":\"string\",\"fieldName\":\"ORDERED_BY\",\"fieldType\":\"dimension\",\"isChecked\":false,\"tableName\":\"income_detail\"},{\"aliasName\":null,\"comments\":\"PERFORM_BY\",\"dataType\":\"string\",\"fieldName\":\"PERFORM_BY\",\"fieldType\":\"dimension\",\"isChecked\":false,\"tableName\":\"income_detail\"},{\"aliasName\":null,\"comments\":\"INCOME_SUBJ_CODE\",\"dataType\":\"string\",\"fieldName\":\"INCOME_SUBJ_CODE\",\"fieldType\":\"dimension\",\"isChecked\":true,\"tableName\":\"income_detail\"},{\"aliasName\":null,\"comments\":\"AMOUNT\",\"dataType\":\"int\",\"fieldName\":\"AMOUNT\",\"fieldType\":\"measure\",\"isChecked\":true,\"tableName\":\"income_detail\"},{\"aliasName\":null,\"comments\":\"SOURCE_TYPE\",\"dataType\":\"string\",\"fieldName\":\"SOURCE_TYPE\",\"fieldType\":\"dimension\",\"isChecked\":true,\"tableName\":\"income_detail\"}],\"isHideFieldList\":false,\"location\":{\"left\":\"39px\",\"top\":\"284px\",\"height\":421},\"tableName\":\"income_detail\",\"isMainTable\":true},{\"displayName\":\"日期转换参照\",\"fieldsInfo\":[{\"aliasName\":\"acct_year3\",\"comments\":\"acct_year\",\"dataType\":\"string\",\"fieldName\":\"acct_year\",\"fieldType\":\"dimension\",\"isChecked\":false,\"tableName\":\"DATE_RELA\"},{\"aliasName\":\"acct_month3\",\"comments\":\"acct_month\",\"dataType\":\"string\",\"fieldName\":\"acct_month\",\"fieldType\":\"dimension\",\"isChecked\":false,\"tableName\":\"DATE_RELA\"},{\"aliasName\":null,\"comments\":\"yeardate\",\"dataType\":\"int\",\"fieldName\":\"yeardate\",\"fieldType\":\"measure\",\"isChecked\":true,\"tableName\":\"DATE_RELA\"},{\"aliasName\":null,\"comments\":\"yearmonth\",\"dataType\":\"string\",\"fieldName\":\"yearmonth\",\"fieldType\":\"dimension\",\"isChecked\":true,\"tableName\":\"DATE_RELA\"},{\"aliasName\":null,\"comments\":\"season\",\"dataType\":\"string\",\"fieldName\":\"season\",\"fieldType\":\"dimension\",\"isChecked\":true,\"tableName\":\"DATE_RELA\"},{\"aliasName\":null,\"comments\":\"halfyear\",\"dataType\":\"string\",\"fieldName\":\"halfyear\",\"fieldType\":\"dimension\",\"isChecked\":true,\"tableName\":\"DATE_RELA\"}],\"isHideFieldList\":false,\"location\":{\"left\":\"395px\",\"top\":\"0px\",\"height\":231},\"tableName\":\"DATE_RELA\",\"isMainTable\":false}],\"title\":{},\"userDefineFields\":[],\"isSaveToAllCategories\":true,\"id\":\"337987745567735808\",\"subjectID\":\"\",\"oldName\":\"comp_income_detail\"}";
        JSONObject json = JSONObject.parseObject(jsonStr);
        JSONArray connectInfo = json.getJSONArray("connectInfo");
        if(connectInfo!=null){
            for(Object o:connectInfo){
                if(o!=null){
                    JSONObject obj = (JSONObject) o;
                    JSONObject from = (JSONObject)obj.get("from");
                    from.put("tableName",from.get("tableName").toString().toUpperCase());
                    JSONObject to = (JSONObject)obj.get("to");
                    to.put("tableName",from.get("tableName").toString().toUpperCase());
                    JSONObject joinInfo = (JSONObject)obj.get("joinInfo");
                    JSONArray relations = (JSONArray) joinInfo.get("relations");
                    for(Object o1:relations){
                        JSONObject obj1 = (JSONObject) o1;
                        JSONObject from1 = (JSONObject)obj.get("from");
                        from1.put("tableName",from.get("tableName").toString().toUpperCase());
                        JSONObject to1 = (JSONObject)obj.get("to");
                        to1.put("tableName",from.get("tableName").toString().toUpperCase());
                    }

                }

            }
            System.out.println();
        }
        System.out.println(json);
    }
}
